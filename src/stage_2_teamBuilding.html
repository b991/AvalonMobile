<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="./src/output.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div class="absolute inset-x-0 -top-40 -z-10 transform-gpu overflow-hidden blur-3xl sm:-top-80" aria-hidden="true">
        <div class="relative left-[calc(50%-11rem)] aspect-[1155/678] w-[36.125rem] -translate-x-1/2 rotate-[30deg] bg-gradient-to-tr from-[#ff80b5] to-[#9089fc] opacity-30 sm:left-[calc(50%-30rem)] sm:w-[72.1875rem]"
            style="clip-path: polygon(74.1% 44.1%, 100% 61.6%, 97.5% 26.9%, 85.5% 0.1%, 80.7% 2%, 72.5% 32.5%, 60.2% 62.4%, 52.4% 68.1%, 47.5% 58.3%, 45.2% 34.5%, 27.5% 76.7%, 0.1% 64.9%, 17.9% 100%, 27.6% 76.8%, 76.1% 97.7%, 74.1% 44.1%)">
        </div>
    </div>
    <!-- Acutal Content Begins -->
    <!-- Navbar -->
    <nav class="bg-indigo-600">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Desktop Menu Links -->
                <div class="md:flex space-x-4">
                    <a href="../index.html"
                        class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">Home</a>
                    <a href="stage_1_pickCards.html"
                        class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">Select
                        Characters</a>
                    <a href="stage_2_teamBuilding.html"
                        class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">Team Building</a>
                    <a href="stage_3_quest.html" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">Quest</a>
                </div>

            </div>
        </div>

    </nav>
    <div class="mt-8 mb-4 text-center text-xl text-gray-700 font-bold"> Stage 2: Team Building
    </div>
    <div class="mt-4 mb-6 text-center text-md text-blue-700 font-semibold" id="displayQuestNum">
    </div>
    <div class="px-16 text-gray-600 font-serif italic"> It is a time for great decisions and strong leaders. 
    Not all knights and ladies of Avalon are loyal ot Arthur, and yet you
    must choose only those that are Good to represent Arthur in his quests. If an open ear and eye is kept, Merlin's sage
    advice can be discerned as whispers of truth.
    </div>

    <div class="mt-8 px-16 text-md text-gray-700 font-bold"> 
    Team Assignment: After appropriate discussion, the Leader takes the required number of Team Tokens (using the folowing
    chart, or numbers on the tableau) and assigns each Team Token to any player.
    </div>
    <div class="flex justify-center mt-4">
        <img src="images/TeamBuildingTableau.png" class="h-44 object-contain rounded-lg shadow-lg">
    </div>


    <div class="mt-8 mb-4 text-center text-xl text-gray-700 font-bold">
        Please choose <span id="tokens" class="text-blue-600"></span> players to represent Aurther in his quest 
    </div>

    <div class="m-8">
        <h3 class="text-base font-semibold leading-6 text-gray-900 text-center">Vote tracker: 
            Evil wins the game if there are <span class="text-red-500">5</span> consecutive failed votes! 
        </h3>
        <dl class="flex gap-8 justify-center mt-8">
        <!-- Square Button -->
        <button class="h-16 w-32 bg-blue-500  text-white font-bold rounded-lg" onclick="makeRed(this)" >
            Track Failure
        </button>
        <button class="h-16 w-32 bg-blue-500  text-white font-bold rounded-lg" onclick="makeRed(this)">
            Track Failure
        </button>
        <button class="h-16 w-32 bg-blue-500  text-white font-bold rounded-lg" onclick="makeRed(this)">
            Track Failure
        </button>
        <button class="h-16 w-32 bg-blue-500  text-white font-bold rounded-lg" onclick="makeRed(this)">
            Track Failure
        </button>
        <button class="h-16 w-32 bg-blue-500  text-white font-bold rounded-lg" onclick="makeRed(this)">
            Track Failure
        </button>
        </dl>
    </div>

    <div class="flex justify-center">
        <button onclick="progress()" class="h-16 w-32 bg-green-700 text-white font-bold rounded-lg">Move On To Quest</button>
    </div>

    <!-- Actual Content Ends -->

<script>
    const playersNum = sessionStorage.getItem('playersNum');
    const questPlayerGrid = JSON.parse(sessionStorage.getItem("questPlayerGrid"));  // Retrieve and parse it back into an array
    let questNum = sessionStorage.getItem('questNum');

    let displayQuestNum = document.getElementById("displayQuestNum");
    displayQuestNum.innerText = `We have ${playersNum} players. This is quest number ${questNum}.`;
    let idxplayer = playersNum -5
    let idxquest = questNum - 1

    const teamtoken = questPlayerGrid[idxquest][idxplayer]
    let displayToken = document.getElementById("tokens");
    displayToken.innerText = `${teamtoken}`;

    function makeRed(button) {
        button.classList.toggle('bg-red-500');
    }

    function progress() {
        window.location.href = "stage_3_quest.html";
    }


</script>


</body>
</html>